/* 响应式设计 */

/* 大屏幕 (1200px+) */
@media (min-width: 1200px) {
    .container {
        max-width: 1400px;
    }
    
    .header h1 {
        font-size: 3rem;
    }
    
    .game-area {
        height: calc(100vh - 180px);
    }
}

/* 中等屏幕 (768px - 1199px) */
@media (max-width: 1199px) {
    .container {
        padding: 15px;
    }
    
    .header h1 {
        font-size: 2.2rem;
    }
    
    .game-area {
        height: calc(100vh - 200px);
        gap: 15px;
    }
    
    .input-group {
        flex-direction: column;
        gap: 15px;
    }
    
    .url-input {
        min-width: auto;
    }
}

/* 平板设备 (768px - 991px) */
@media (max-width: 991px) {
    .game-area {
        height: calc(100vh - 220px);
        gap: 15px;
    }
    
    .game-top-controls {
        padding: 15px;
        gap: 15px;
    }
    
    .game-top-controls .color-legend {
        min-width: 250px;
    }
    
    .game-top-controls .legend-container {
        max-height: 120px;
    }
    
    .canvas-wrapper {
        min-height: 350px;
    }
    
    #gameCanvas {
        max-height: 500px;
    }
}

/* 小屏幕设备 (576px - 767px) */
@media (max-width: 767px) {
    .container {
        padding: 10px;
    }
    
    .header h1 {
        font-size: 1.8rem;
    }
    
    .header p {
        font-size: 1rem;
    }
    
    .input-section {
        padding: 20px;
    }
    
    .settings-group {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }
    
    .settings-group label {
        margin-bottom: 5px;
    }
    
    /* 隐藏手机端的放大镜控制按钮 */
    .canvas-controls {
        display: none;
    }
    
    .canvas-bottom-controls {
        flex-direction: column;
        gap: 10px;
    }
    
    .progress-container {
        width: 100%;
        gap: 10px;
        text-align: center;
    }
    
    .game-area {
        height: calc(100vh - 250px);
        min-height: 500px;
    }
    
    .game-top-controls {
        flex-direction: column;
        padding: 15px;
        gap: 12px;
    }
    
    .game-top-controls .color-legend {
        min-width: auto;
        order: 2;
    }
    
    .game-top-controls .game-controls {
        order: 1;
        justify-content: center;
        display: flex;
        flex-direction: row;
        gap: 8px;
        flex-wrap: nowrap;
    }
    
    .game-top-controls .legend-container {
        max-height: 100px;
        gap: 6px;
    }
    
    .game-top-controls .legend-item {
        padding: 4px 8px;
        font-size: 0.9rem;
    }
    
    /* 隐藏手机模式下颜色图例的数量 */
    .game-top-controls .color-count {
        display: none;
    }
    
    /* 确保控制按钮在同一行 */
    .game-top-controls .game-controls {
        display: flex;
        flex-direction: row;
        gap: 8px;
        flex-wrap: nowrap;
    }
    
    .legend-container {
        max-height: 200px;
    }
    
    .modal-content {
        margin: 20px;
        padding: 25px;
    }
    
    .modal-buttons {
        flex-direction: column;
    }
    
    .modal-btn {
        width: 100%;
        margin-bottom: 10px;
    }
    
    .modal-btn:last-child {
        margin-bottom: 0;
    }
}

/* 超小屏幕设备 (< 576px) */
@media (max-width: 575px) {
    .container {
        padding: 8px;
    }
    
    .header {
        margin-bottom: 20px;
    }
    
    .header h1 {
        font-size: 1.6rem;
    }
    
    .input-section {
        padding: 15px;
        margin-bottom: 20px;
    }
    
    .file-upload {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }
    
    .upload-btn {
        text-align: center;
        padding: 15px;
    }
    
    .url-input {
        flex-direction: column;
        gap: 10px;
    }
    
    .load-btn {
        padding: 15px;
    }
    
    .generate-btn {
        padding: 18px 25px;
        font-size: 15px;
    }
    
    .canvas-wrapper {
        min-height: 300px;
    }
    
    #gameCanvas {
        max-height: 400px;
    }
    
    /* 隐藏超小屏幕的放大镜控制按钮 */
    .canvas-controls {
        display: none;
    }
    
    .color-legend h3,
    .game-controls h3,
    .game-info h3 {
        font-size: 1rem;
        margin-bottom: 10px;
    }
    
    .game-area {
        height: calc(100vh - 280px);
        min-height: 400px;
    }
    
    .game-top-controls {
        padding: 12px;
        gap: 12px;
    }
    
    .game-top-controls .legend-container {
        max-height: 80px;
        padding: 8px;
        gap: 4px;
    }
    
    .game-top-controls .legend-item {
        padding: 3px 6px;
        font-size: 0.8rem;
    }
    
    /* 隐藏超小屏幕颜色图例的数量 */
    .game-top-controls .color-count {
        display: none;
    }
    
    /* 超小屏幕控制按钮同行排列 */
    .game-top-controls .game-controls {
        display: flex;
        flex-direction: row;
        gap: 6px;
        flex-wrap: nowrap;
    }
    
    .game-top-controls .control-btn.compact {
        padding: 6px 10px;
        font-size: 0.75rem;
        min-width: 60px;
    }
    
    .legend-item {
        padding: 10px 8px;
    }
    
    .color-sample {
        width: 20px;
        height: 20px;
    }
    
    .control-btn {
        padding: 15px;
        font-size: 14px;
    }
    
    .info-item {
        padding: 10px 0;
    }
    
    .modal-content {
        margin: 10px;
        padding: 20px;
    }
    
    .modal-content h2 {
        font-size: 1.3rem;
    }
}

/* 横屏模式优化 */
@media (max-height: 600px) and (orientation: landscape) {
    .header {
        margin-bottom: 15px;
    }
    
    .header h1 {
        font-size: 1.5rem;
        margin-bottom: 5px;
    }
    
    .header p {
        font-size: 0.9rem;
    }
    
    .input-section {
        padding: 15px;
        margin-bottom: 15px;
    }
    
    .canvas-wrapper {
        min-height: 250px;
    }
    
    #gameCanvas {
        max-height: 300px;
    }
    
    .game-top-controls {
        padding: 12px;
        gap: 12px;
    }
    
    .game-top-controls .legend-container {
        max-height: 100px;
        overflow-x: auto;
    }
    
    .legend-container {
        max-height: 150px;
    }
}

/* 高分辨率屏幕优化 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    #gameCanvas {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
    }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {
    .canvas-controls button,
    .control-btn,
    .control-btn.compact,
    .upload-btn,
    .load-btn,
    .generate-btn {
        min-height: 44px;
        padding: 12px 16px;
    }
    
    .control-btn.compact {
        min-width: 70px;
        font-size: 12px;
        padding: 8px 12px;
    }
    
    /* 触摸设备优化 */
    .game-top-controls .color-count {
        display: none;
    }
    
    .game-top-controls .game-controls {
        display: flex;
        flex-direction: row;
        gap: 8px;
        flex-wrap: nowrap;
    }
    
    .legend-item {
        min-height: 44px;
        padding: 12px 8px;
    }
    
    #gameCanvas {
        cursor: pointer;
        /* 禁用iOS Safari的双击缩放 */
        touch-action: none;
        /* 禁用用户选择 */
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        /* 禁用iOS Safari的长按菜单 */
        -webkit-touch-callout: none;
    }
    
    .canvas-wrapper {
        /* 确保画布容器也禁用默认触摸行为 */
        touch-action: none;
        overflow: hidden;
    }
    
    .canvas-controls button:hover,
    .control-btn:hover,
    .upload-btn:hover,
    .load-btn:hover,
    .generate-btn:hover {
        transform: none;
        box-shadow: none;
    }
    
    .canvas-controls button:active,
    .control-btn:active,
    .upload-btn:active,
    .load-btn:active,
    .generate-btn:active {
        transform: scale(0.98);
    }
    
    /* 移动端游戏区域优化 */
    .game-area {
        gap: 10px;
    }
    
    .canvas-container {
        order: 1;
        width: 100%;
    }
    
    .sidebar {
        order: 2;
        width: 100%;
        flex-direction: row;
        overflow-x: auto;
        padding: 10px 0;
    }
    
    .color-legend,
    .game-controls,
    .game-info {
        min-width: 280px;
        margin-right: 15px;
    }
    
    /* 隐藏触摸设备的放大镜控制按钮 */
    .canvas-controls {
        display: none;
    }
    
    /* 移动端专用提示 */
    .mobile-instructions {
        display: block;
        background: #e3f2fd;
        border: 1px solid #2196f3;
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 15px;
        font-size: 14px;
        color: #1976d2;
    }
    
    .mobile-instructions .instructions-title {
        font-weight: bold;
        margin-bottom: 8px;
        display: block;
    }
    
    .mobile-instructions ul {
        margin: 0;
        padding-left: 20px;
    }
    
    .mobile-instructions li {
        margin-bottom: 4px;
    }
}

/* 桌面端隐藏移动端提示 */
@media (hover: hover) and (pointer: fine) {
    .mobile-instructions {
        display: none;
    }
}

/* 打印样式 */
@media print {
    body {
        background: white;
    }
    
    .header,
    .input-section,
    .canvas-controls,
    .sidebar,
    .footer {
        display: none;
    }
    
    .game-area {
        display: block;
    }
    
    .canvas-container {
        box-shadow: none;
        border: 1px solid #000;
    }
    
    #gameCanvas {
        max-width: 100%;
        max-height: none;
    }
}

/* 减少动画的用户偏好 */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    .spinner {
        animation: none;
        border: 4px solid #667eea;
    }
}

/* 深色模式支持 */
@media (prefers-color-scheme: dark) {
    body {
        background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        color: #e0e0e0;
    }
    
    /* 主要容器和面板 */
    .input-section,
    .canvas-container,
    .color-legend,
    .game-controls,
    .game-info,
    .modal-content,
    .game-top-controls {
        background: #2d2d2d;
        color: #e0e0e0;
        border-color: #444444;
    }
    
    /* 画布容器 */
    .canvas-wrapper {
        background: #1a1a1a;
        border-color: #444444;
    }
    
    /* 表单输入元素 */
    .url-input input,
    .settings-group select,
    .filter-select {
        background: #1a1a1a;
        color: #e0e0e0;
        border-color: #444444;
    }
    
    .url-input input:focus,
    .filter-select:focus {
        border-color: #667eea;
    }
    
    /* 按钮元素 */
    .canvas-controls button,
    .control-btn,
    .control-btn.compact {
        background: #1a1a1a;
        border-color: #444444;
        color: #e0e0e0;
    }
    
    .control-btn:hover,
    .canvas-controls button:hover {
        background: #333333;
        border-color: #666666;
    }
    
    /* 导航按钮 */
    .nav-btn {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.2);
        color: #e0e0e0;
    }
    
    .nav-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.3);
    }
    
    .nav-btn.active {
        background: rgba(255, 255, 255, 0.9);
        color: #1a1a1a;
    }
    
    /* 文字和标签 */
    .settings-group label,
    .filter-group label,
    .file-name,
    .gallery-item span,
    .gallery-placeholder {
        color: #b0b0b0;
    }
    
    /* 颜色图例 */
    .legend-item {
        background: #1a1a1a;
        border-color: #444444;
        color: #e0e0e0;
    }
    
    .legend-item:hover {
        background: #333333;
    }
    
    .legend-item.highlighted {
        background: #2c3e50;
        border-color: #667eea;
    }
    
    .legend-placeholder {
        color: #888888;
    }
    
    /* 信息项目 */
    .info-item {
        border-bottom-color: #444444;
        color: #e0e0e0;
    }
    
    .info-item span:first-child {
        color: #b0b0b0;
    }
    
    .info-item span:last-child {
        color: #e0e0e0;
    }
    
    /* 画廊相关 */
    .gallery-section h2,
    .gallery-section h3,
    .gallery-category-section h4 {
        color: #e0e0e0;
    }
    
    .gallery-item {
        background: #2d2d2d;
        border-color: #444444;
    }
    
    .gallery-item:hover {
        background: #333333;
        border-color: #666666;
    }
    
    /* 删除按钮 */
    .delete-btn {
        background: rgba(255, 82, 82, 0.8);
        color: white;
    }
    
    .delete-btn:hover {
        background: rgba(255, 82, 82, 1);
    }
    
    /* 模态框 */
    .modal {
        background: rgba(0, 0, 0, 0.8);
    }
    
    .modal-content h2 {
        color: #e0e0e0;
    }
    
    .modal-content p {
        color: #b0b0b0;
    }
    
    /* 进度条 */
    .progress-bar {
        background: #1a1a1a;
    }
    
    .progress-text {
        color: #e0e0e0;
    }
    
    /* 移动端指引 */
    .mobile-instructions {
        background: rgba(33, 150, 243, 0.1);
        border-color: rgba(33, 150, 243, 0.3);
        color: #64b5f6;
    }
    
    /* 滚动条 */
    .legend-container::-webkit-scrollbar-track {
        background: #1a1a1a;
    }
    
    .legend-container::-webkit-scrollbar-thumb {
        background: #444444;
    }
    
    .legend-container::-webkit-scrollbar-thumb:hover {
        background: #666666;
    }
    
    /* 页脚在深色模式下保持白色 */
    .footer {
        color: #e0e0e0;
        opacity: 0.9;
    }
    
    /* 状态指示器 */
    .status-indicator {
        background: rgba(45, 45, 45, 0.95);
        color: #e0e0e0;
    }
    
    /* 用户画廊状态颜色调整 */
    .user-gallery-item.completed {
        border-color: #4ade80;
        background-color: rgba(74, 222, 128, 0.1);
    }
    
    .user-gallery-item.incomplete {
        border-color: #fbbf24;
        background-color: rgba(251, 191, 36, 0.1);
    }
    
    /* 加载覆盖层 */
    .loading-overlay {
        background: rgba(26, 26, 26, 0.9);
        color: #e0e0e0;
    }
    
    /* 文件名提示文字 */
    .file-name {
        color: #a0a0a0;
    }
    
    /* 颜色数字和计数 */
    .color-number {
        color: #e0e0e0;
    }
    
    .color-count {
        color: #a0a0a0;
    }
}

 